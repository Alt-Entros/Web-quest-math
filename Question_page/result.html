<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../image/logo.png">
    <link rel="stylesheet" href="style.css">
    <title>Итоги</title>
</head>
<body>
    <header>
        <h1>
            Итоги
        </h1>
    </header>
    <body>
        <div class="userinfo_container">
            <div>
                <h3>ФИО:</h3>
                <h3 id="last-name"></h3>
                <h3 id="first-name"></h3>
            </div>
            <div>
                <h3>Группа:</h3>
                <h3 id="group"></h3>
            </div>
        </div>
        <div class="nd">
        <table class="final_result">
            <tr>
                <td></td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
                <td>6</td>
                <td>7</td>
                <td>8</td>
                <td>9</td>
                <td>10</td>
                <td>11</td>
            </tr>
            <tr>
                <td></td>
                <td>парк Вандерленд</td>
                <td>Математический зоопарк</td>
                <td>Сказочная математика</td>
                <td>Спортплощадка</td>
                <td>Зал торжеств</td>
                <td>Роттонда</td>
                <td>Пруд</td>
                <td>Каскад прудов</td>
                <td>Коллонада</td>
                <td>Прокат</td>
                <td>Храм</td>
                <td>итог</td>
            </tr>
            <tr>
                <td>1к</td>
                <td class="result" data-page="1" data-task="1">-</td>
                <td class="result" data-page="2" data-task="1">-</td>
                <td class="result" data-page="3" data-task="1">-</td>
                <td class="result" data-page="4" data-task="1">-</td>
                <td class="result" data-page="5" data-task="1">-</td>
                <td class="result" data-page="6" data-task="1">-</td>
                <td class="result" data-page="7" data-task="1">-</td>
                <td class="result" data-page="8" data-task="1">-</td>
                <td class="result" data-page="9" data-task="1">-</td>
                <td class="result" data-page="10" data-task="1">-</td>
                <td class="result" data-page="11" data-task="1">-</td>
                <td class="totalResultTask1">0</td>
            </tr>
            <tr>
                <td>2к</td>
                <td class="result" data-page="1" data-task="2">-</td>
                <td class="result" data-page="2" data-task="2">-</td>
                <td class="result" data-page="3" data-task="2">-</td>
                <td class="result" data-page="4" data-task="2">-</td>
                <td class="result" data-page="5" data-task="2">-</td>
                <td class="result" data-page="6" data-task="2">-</td>
                <td class="result" data-page="7" data-task="2">-</td>
                <td class="result" data-page="8" data-task="2">-</td>
                <td class="result" data-page="9" data-task="2">-</td>
                <td class="result" data-page="10" data-task="2">-</td>
                <td class="result" data-page="11" data-task="2">-</td>
                <td class="totalResultTask2">0</td>
            </tr>
            <tr>
                <td>3к</td>
                <td class="result" data-page="1" data-task="3">-</td>
                <td class="result" data-page="2" data-task="3">-</td>
                <td class="result" data-page="3" data-task="3">-</td>
                <td class="result" data-page="4" data-task="3">-</td>
                <td class="result" data-page="5" data-task="3">-</td>
                <td class="result" data-page="6" data-task="3">-</td>
                <td class="result" data-page="7" data-task="3">-</td>
                <td class="result" data-page="8" data-task="3">-</td>
                <td class="result" data-page="9" data-task="3">-</td>
                <td class="result" data-page="10" data-task="3">-</td>
                <td class="result" data-page="11" data-task="3">-</td>
                <td class="totalResultTask3">0</td>
            </tr>
            <tr>
                <td>4к</td>
                <td class="result" data-page="1" data-task="4">-</td>
                <td class="result" data-page="2" data-task="4">-</td>
                <td class="result" data-page="3" data-task="4">-</td>
                <td class="result" data-page="4" data-task="4">-</td>
                <td class="result" data-page="5" data-task="4">-</td>
                <td class="result" data-page="6" data-task="4">-</td>
                <td class="result" data-page="7" data-task="4">-</td>
                <td class="result" data-page="8" data-task="4">-</td>
                <td class="result" data-page="9" data-task="4">-</td>
                <td class="result" data-page="10" data-task="4">-</td>
                <td class="result" data-page="11" data-task="4">-</td>
                <td class="totalResultTask4">0</td>
            </tr>
            <tr>
                <td>5к</td>
                <td class="result" data-page="1" data-task="5">-</td>
                <td class="result" data-page="2" data-task="5">-</td>
                <td class="result" data-page="3" data-task="5">-</td>
                <td class="result" data-page="4" data-task="5">-</td>
                <td class="result" data-page="5" data-task="5">-</td>
                <td class="result" data-page="6" data-task="5">-</td>
                <td class="result" data-page="7" data-task="5">-</td>
                <td class="result" data-page="8" data-task="5">-</td>
                <td class="result" data-page="9" data-task="5">-</td>
                <td class="result" data-page="10" data-task="5">-</td>
                <td class="result" data-page="11" data-task="5">-</td>
                <td class="totalResultTask5">0</td>
            </tr>
        </table>
        </div>
        <div class="dn mobile_table">
        <table>
           <tr>
                <td>№</td>
                <td>Название</td>
                <td>1к</td>
                <td>2к</td>
                <td>3к</td>
                <td>4к</td>
                <td>5к</td>
            </tr>
            <tr>
                <td>1</td>
                <td>парк Вандерленд</td>
                <td class="result" data-page="1" data-task="1">-</td>
                <td class="result" data-page="1" data-task="2">-</td>
                <td class="result" data-page="1" data-task="3">-</td>
                <td class="result" data-page="1" data-task="4">-</td>
                <td class="result" data-page="1" data-task="5">-</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Математический зоопарк</td>
                <td class="result" data-page="2" data-task="1">-</td>
                <td class="result" data-page="2" data-task="2">-</td>
                <td class="result" data-page="2" data-task="3">-</td>
                <td class="result" data-page="2" data-task="4">-</td>
                <td class="result" data-page="2" data-task="5">-</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Сказочная математика</td>
                <td class="result" data-page="3" data-task="1">-</td>
                <td class="result" data-page="3" data-task="2">-</td>
                <td class="result" data-page="3" data-task="3">-</td>
                <td class="result" data-page="3" data-task="4">-</td>
                <td class="result" data-page="3" data-task="5">-</td>
            </tr>
            <tr>
                <td>4</td>
                <td>Спортплощадка</td>
                <td class="result" data-page="3" data-task="1">-</td>
                <td class="result" data-page="3" data-task="2">-</td>
                <td class="result" data-page="3" data-task="3">-</td>
                <td class="result" data-page="3" data-task="4">-</td>
                <td class="result" data-page="3" data-task="5">-</td>
            </tr>
            <tr>
                <td>5</td>
                <td>Зал торжеств</td>
                <td class="result" data-page="3" data-task="1">-</td>
                <td class="result" data-page="3" data-task="2">-</td>
                <td class="result" data-page="3" data-task="3">-</td>
                <td class="result" data-page="3" data-task="4">-</td>
                <td class="result" data-page="3" data-task="5">-</td>
            </tr>
            <tr>
                <td>6</td>
                <td>Роттонда</td>
                <td class="result" data-page="3" data-task="1">-</td>
                <td class="result" data-page="3" data-task="2">-</td>
                <td class="result" data-page="3" data-task="3">-</td>
                <td class="result" data-page="3" data-task="4">-</td>
                <td class="result" data-page="3" data-task="5">-</td>
            </tr>
            <tr>
                <td>7</td>
                <td>Пруд</td>
                <td class="result" data-page="3" data-task="1">-</td>
                <td class="result" data-page="3" data-task="2">-</td>
                <td class="result" data-page="3" data-task="3">-</td>
                <td class="result" data-page="3" data-task="4">-</td>
                <td class="result" data-page="3" data-task="5">-</td>
            </tr>
            <tr>
                <td>8</td>
                <td>Каскад прудов</td>
                <td class="result" data-page="3" data-task="1">-</td>
                <td class="result" data-page="3" data-task="2">-</td>
                <td class="result" data-page="3" data-task="3">-</td>
                <td class="result" data-page="3" data-task="4">-</td>
                <td class="result" data-page="3" data-task="5">-</td>
            </tr>
            <tr>
                <td>9</td>
                <td>Коллонада</td>
                <td class="result" data-page="3" data-task="1">-</td>
                <td class="result" data-page="3" data-task="2">-</td>
                <td class="result" data-page="3" data-task="3">-</td>
                <td class="result" data-page="3" data-task="4">-</td>
                <td class="result" data-page="3" data-task="5">-</td>
            </tr>
            <tr>
                <td>10</td>
                <td>Прокат</td>
                <td class="result" data-page="3" data-task="1">-</td>
                <td class="result" data-page="3" data-task="2">-</td>
                <td class="result" data-page="3" data-task="3">-</td>
                <td class="result" data-page="3" data-task="4">-</td>
                <td class="result" data-page="3" data-task="5">-</td>
            </tr>
            <tr>
                <td>11</td>
                <td>Храм</td>
                <td class="result" data-page="3" data-task="1">-</td>
                <td class="result" data-page="3" data-task="2">-</td>
                <td class="result" data-page="3" data-task="3">-</td>
                <td class="result" data-page="3" data-task="4">-</td>
                <td class="result" data-page="3" data-task="5">-</td>
            </tr>
            <tr>
                <td></td>
                <td>итог</td>
                <td class="totalResultTask1"></td>
                <td class="totalResultTask2"></td>
                <td class="totalResultTask3"></td>
                <td class="totalResultTask4"></td>
                <td class="totalResultTask5"></td>
            </tr>
        </table>
        </div>
        <div>
            <a href="../map.html" class="btn btn3">Карта</a>
        </div>
        <script src="script.js"></script>
        <script>
            
            function displayFinalResults() {
    for (let i = 1; i <= 11; i++) {
        const pageResults = JSON.parse(localStorage.getItem('resultsPage' + i));
        if (pageResults) {
            for (let j = 0; j < pageResults.length; j++) {
                // Используйте querySelectorAll и forEach для обновления всех соответствующих элементов
                document.querySelectorAll(`.result[data-page="${i}"][data-task="${j + 1}"]`).forEach(resultCell => {
                    resultCell.textContent = pageResults[j] ? '1' : '0';
                });
            }
        }
    }
}

            
            document.addEventListener('DOMContentLoaded', function() {
                displayFinalResults();
                
            });
            
            function sumValuesAndDisplayResultForTask(taskNumber, resultClass) {
            let sum = 0;

            // Суммируем результаты для задания с номером taskNumber
            document.querySelectorAll(`.result[data-task="${taskNumber}"]`).forEach(cell => {
                let cellContent = cell.textContent;
                // Если содержимое ячейки - дефис, считаем его за 0
                let cellValue = cellContent === '-' ? 0 : parseFloat(cellContent);
                if (!isNaN(cellValue)) {
                    sum += cellValue;
                }
            });

            // Отображаем итоговый результат во всех соответствующих ячейках
            document.querySelectorAll(`.${resultClass}`).forEach(resultCell => {
                resultCell.textContent = sum;
            });
        }


// Пример вызова функции
document.addEventListener('DOMContentLoaded', function() {
    sumValuesAndDisplayResultForTask(1, 'totalResultTask1');
    sumValuesAndDisplayResultForTask(2, 'totalResultTask2');
    sumValuesAndDisplayResultForTask(3, 'totalResultTask3');
    sumValuesAndDisplayResultForTask(4, 'totalResultTask4');
    sumValuesAndDisplayResultForTask(5, 'totalResultTask5');
});


        // Функция для заполнения тегов данными из userInfo
        function fillUserTags() {
        // Извлекаем строку userInfo из localStorage
        const userInfoString = localStorage.getItem('userInfo');
        
        // Проверяем, существует ли userInfoString
        if (userInfoString) {
            // Преобразуем строку обратно в объект
            const userInfo = JSON.parse(userInfoString);
            
            // Заполняем теги содержимым
            document.getElementById('last-name').textContent = userInfo.lastName;
            document.getElementById('first-name').textContent = userInfo.firstName;
            document.getElementById('group').textContent = userInfo.group;
        }
        }

        // Вызов функции после загрузки DOM
        document.addEventListener('DOMContentLoaded', fillUserTags);
        </script>
    </body>
</body>
</html>